<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
  function registerGO() {
    var xhttp = new XMLHttpRequest();
    
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        var member = this.responseText;

        if (member == "fail") {
          alert("You are already a member.");
        }
        else if(member == "blank"){
          alert("Please enter all values.");
        }
        else {
          location.href = '/login'
        }
      }
    };
    
    var parameter = 'name=' + document.getElementById("defaultRegisterFormName").value 
                  + '&id=' + document.getElementById("defaultRegisterFormId").value 
                  + '&pw=' + document.getElementById("defaultRegisterFormPassword").value 
                  + '&phone_num=' + document.getElementById("defaultRegisterFormPhoneNumber").value;

    console.log(parameter);//입력 값 콘솔에 출력
    xhttp.open("post", "/register_route", true);
    xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    xhttp.send(parameter);//입력 값 서버에 전송
  }
</script>

{% extends "sub_layout.html" %}
{% block content %}

<main id="main">
    <!-- ======= Login Section ======= -->
    <section class="breadcrumbs">
        <div class="container">

            <div class="d-flex justify-content-between align-items-center">
                <h2>Register</h2>
                <ol>
                    <li><a href="/">Home</a></li>
                    <li>Register</li>
                </ol>
            </div>

        </div>
    </section><!-- End Login Section -->
    <section>
        <div style="width: 60%; float:none; margin:0 auto" >
            <div class="col-lg-11">
                <div class="container">
                    <!-- Default form register -->
                    <form class="text-center border border-light p-5" action="#!">
                        <h1 class="h4 text-gray-900 mb-4">Sign up</h1>
                        <div class="form-row mb-4">
                            <div class="col">
                                <!-- name -->
                                <input autocomplete="off" type="text" id="defaultRegisterFormName" class="form-control" placeholder="name">
                            </div>
                        </div>
                        <!-- E-mail -->
                        <input autocomplete="off" type="text" id="defaultRegisterFormId" class="form-control mb-4" placeholder="ID">
                        <!-- Password -->
                        <input autocomplete="off" type="password" id="defaultRegisterFormPassword" class="form-control" placeholder="Password" aria-describedby="defaultRegisterFormPasswordHelpBlock">
                        <small id="defaultRegisterFormPasswordHelpBlock" class="form-text text-muted mb-4">
                            At least 8 characters and 1 digit
                        </small>
                        <!-- Phone number -->
                        <input autocomplete="off" type="text" id="defaultRegisterFormPhoneNumber" class="form-control" placeholder="Phone number" aria-describedby="defaultRegisterFormPhoneHelpBlock">
<br>
                        <!-- Sign up button -->
                        <a class="btn btn-primary btn-user btn-block" onclick="registerGO()">Sign up</a>
    
                        <hr>
    
                    </form>
    <!-- Default form register -->
                  <!-- Default form register -->
    
    <!-- Default form register -->
                  <div class="text-center">
                    <a class="small" href="/forgot_password_page">Forgot Password?</a>
                  </div>
                  <div class="text-center">
                    <a class="small" href="/login">Already have an account? Login!</a>
                  </div>
                  <div class="text-center">
                    <a class="small" href="/">Go back to the main page?</a>
                  </div>
                </div>
              </div>
        </div>
    </section>

</main>

{% endblock %}