<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
  function DiaryUpdateGoid() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        var member = this.responseText;
        console.log(member,"script");
        if (member == "fail") {
          alert("실패");
        }
        else {
          location.href = '/diary.update';
        }
      }
    };

    var parameter = 'diary_id= ' + trades.diary_id
    console.log(parameter);//입력 값 콘솔에 출력
    xhttp.open("post", "/diary_update", true);
    xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    xhttp.send(parameter);//입력 값 서버에 전송
  }
</script>
{% extends "sub_layout.html" %}
{% block content %}
<style>
    #select{
        display : inline-block;
        width : 100px;
        overflow : hidden;
        text-overflow : ellipsis;
        white-space : nowrap;
    }
    #id {
        display : none;
    }
    </style>

<main id="main">
<a href = "new_diary"><button>다이어리 작성</button></a>
{% for trades in trade: %}
<p id = "id">{{trades.diary_id}}</p>
<h1>{{ trades.diary_title}}</h1>
<p id = "select">{{ trades.diary_body }}</p>
<p>{{ trades.diary_date }}</p>
<a href = "/diary_update"><button onclick="DiaryUpdateGoid('{{trades.diary_id}}')" class="btn btn-primary">수정</button></a>
<hr>
{% endfor %}
</main>
{% endblock %}